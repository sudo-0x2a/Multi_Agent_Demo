# Example Output
```
==================================================
Multi-Agent Game Demo
==================================================

Loading game world...
Loading world from: Configs/world_setup.json
World: demo_world
Map loaded with 4 locations
Loaded character: 小张 (ID: 001) at 家
Loaded character: 小红 (ID: 002) at 医院
Loaded 2 characters
Game state initialized
World loading complete!

==================================================
World Information
==================================================
Map Locations: 家, 医院, 小明家, 超市
Total Characters: 2

Characters:
  - 小张 (ID: 001) at 家
  - 小红 (ID: 002) at 医院

==================================================
Creating NPC Agents
==================================================
✓ Created agent for 小张
✓ Created agent for 小红

==================================================
Game Setup Complete!
==================================================
Total agents: 2

==================================================
Starting Test Simulation
==================================================
Goal: 小张 should go to 医院 and speak with 小红

Initial state: 小张 at 家

==================================================
Turn 1
==================================================
[NPC001] Current location: 家
[NPC001] Available actions: ['说话', '移动', '保持沉默', '睡觉', '查看地图']

🤖 Running agent workflow: NPC001 (小张) ...

📝 Conversation Log:
--------------------------------------------------
[1] HumanMessage:
    系统：你当前在家
[2] AIMessage:
    行动类型='查看地图' 内心='我现在在家，需要去医院取药，先看看地图上医院的位置和路线怎么走。'
    Structured: {'行动类型': '查看地图', '内心': '我现在在家，需要去医院取药，先看看地图上医院的位置和路线怎么走。'}
[3] HumanMessage:
    系统反馈：地图信息：共有4个地点 - 家(坐标[0, 0]), 医院(坐标[1, 1]), 小明家(坐标[0, 1]), 超市(坐标[1, 0])
--------------------------------------------------

✅ Last Engine Event:
   Actor: 小张
   Action: 查看地图
   Args: {'内心': '我现在在家，需要去医院取药，先看看地图上医院的位置和路线怎么走。'}
   Map Info: {'locations': {'家': [0, 0], '医院': [1, 1], '小明家': [0, 1], '超市': [1, 0]}, 'total_locations': 4}

[NPC002] Standby: no incoming dialogue addressed to 小红.

🎯 Checking Success Criteria:
   Location: 家 (need: 医院)
   At Hospital: ✗
   Spoke with 小红: ✗


==================================================
Turn 2
==================================================
[NPC001] Current location: 家
[NPC001] Available actions: ['说话', '移动', '保持沉默', '睡觉', '查看地图']

🤖 Running agent workflow: NPC001 (小张) ...

📝 Conversation Log:
--------------------------------------------------
[1] HumanMessage:
    系统：你当前在家
[2] AIMessage:
    行动类型='查看地图' 内心='我现在在家，需要去医院取药，先看看地图上医院的位置和路线怎么走。'
[3] HumanMessage:
    系统反馈：地图信息：共有4个地点 - 家(坐标[0, 0]), 医院(坐标[1, 1]), 小明家(坐标[0, 1]), 超市(坐标[1, 0])
[4] HumanMessage:
    系统：你当前在家
[5] AIMessage:
    行动类型='移动' 方向='上' 内心='昨天小明说他不舒服，正好顺路去小明家看看他怎么样了，然后再去医院取药，手有点疼，得抓紧时间。'
    Structured: {'行动类型': '移动', '方向': '上', '内心': '昨天小明说他不舒服，正好顺路去小明家看看他怎么样了，然后再去医院取药，手有点疼，得抓紧时间。'}
[6] HumanMessage:
    系统反馈：你成功移动到了小明家
--------------------------------------------------

✅ Last Engine Event:
   Actor: 小张
   Action: 移动
   Args: {'方向': '上', '内心': '昨天小明说他不舒服，正好顺路去小明家看看他怎么样了，然后再去医院取药，手有点疼，得抓紧时间。'}
   New Location: 小明家

[NPC002] Standby: no incoming dialogue addressed to 小红.

🎯 Checking Success Criteria:
   Location: 小明家 (need: 医院)
   At Hospital: ✗
   Spoke with 小红: ✗


==================================================
Turn 3
==================================================
[NPC001] Current location: 小明家
[NPC001] Available actions: ['说话', '移动', '保持沉默', '查看地图']

🤖 Running agent workflow: NPC001 (小张) ...

📝 Conversation Log:
--------------------------------------------------
[1] HumanMessage:
    系统：你当前在家
[2] AIMessage:
    行动类型='查看地图' 内心='我现在在家，需要去医院取药，先看看地图上医院的位置和路线怎么走。'
[3] HumanMessage:
    系统反馈：地图信息：共有4个地点 - 家(坐标[0, 0]), 医院(坐标[1, 1]), 小明家(坐标[0, 1]), 超市(坐标[1, 0])
[4] HumanMessage:
    系统：你当前在家
[5] AIMessage:
    行动类型='移动' 方向='上' 内心='昨天小明说他不舒服，正好顺路去小明家看看他怎么样了，然后再去医院取药，手有点疼，得抓紧时间。'
[6] HumanMessage:
    系统反馈：你成功移动到了小明家
[7] HumanMessage:
    系统：你当前在小明家
[8] AIMessage:
    行动类型='保持沉默' 内心='现在到了小明家，正好问问他昨天说不舒服怎么样了，手有点疼但先关心朋友，然后再去医院取药。'
    Structured: {'行动类型': '保持沉默', '内心': '现在到了小明家，正好问问他昨天说不舒服怎么样了，手有点疼但先关心朋友，然后再去医院取药。'}
[9] HumanMessage:
    系统反馈：你选择了保持沉默
--------------------------------------------------

✅ Last Engine Event:
   Actor: 小张
   Action: 保持沉默
   Args: {'内心': '现在到了小明家，正好问问他昨天说不舒服怎么样了，手有点疼但先关心朋友，然后再去医院取药。'}

[NPC002] Standby: no incoming dialogue addressed to 小红.

🎯 Checking Success Criteria:
   Location: 小明家 (need: 医院)
   At Hospital: ✗
   Spoke with 小红: ✗


==================================================
Turn 4
==================================================
[NPC001] Current location: 小明家
[NPC001] Available actions: ['说话', '移动', '保持沉默', '查看地图']

🤖 Running agent workflow: NPC001 (小张) ...

📝 Conversation Log:
--------------------------------------------------
[1] HumanMessage:
    系统：你当前在家
[2] AIMessage:
    行动类型='查看地图' 内心='我现在在家，需要去医院取药，先看看地图上医院的位置和路线怎么走。'
[3] HumanMessage:
    系统反馈：地图信息：共有4个地点 - 家(坐标[0, 0]), 医院(坐标[1, 1]), 小明家(坐标[0, 1]), 超市(坐标[1, 0])
[4] HumanMessage:
    系统：你当前在家
[5] AIMessage:
    行动类型='移动' 方向='上' 内心='昨天小明说他不舒服，正好顺路去小明家看看他怎么样了，然后再去医院取药，手有点疼，得抓紧时间。'
[6] HumanMessage:
    系统反馈：你成功移动到了小明家
[7] HumanMessage:
    系统：你当前在小明家
[8] AIMessage:
    行动类型='保持沉默' 内心='现在到了小明家，正好问问他昨天说不舒服怎么样了，手有点疼但先关心朋友，然后再去医院取药。'
[9] HumanMessage:
    系统反馈：你选择了保持沉默
[10] HumanMessage:
    系统：你当前在小明家
[11] AIMessage:
    行动类型='移动' 方向='右' 内心='在小明家保持沉默，可能小明休息了，没打扰他。昨天他说不舒服，下次再问问。现在手疼得厉害，得赶紧去医院取药，从这里右边就是医院了。'
    Structured: {'行动类型': '移动', '方向': '右', '内心': '在小明家保持沉默，可能小明休息了，没打扰他。昨天他说不舒服，下次再问问。现在手疼得厉害，得赶紧去医院取药，从这里右边就是医院了。'}
[12] HumanMessage:
    系统反馈：你成功移动到了医院
--------------------------------------------------

✅ Last Engine Event:
   Actor: 小张
   Action: 移动
   Args: {'方向': '右', '内心': '在小明家保持沉默，可能小明休息了，没打扰他。昨天他说不舒服，下次再问问。现在手疼得厉害，得赶紧去医院取药，从这里右边就是医院了。'}
   New Location: 医院

[NPC002] Standby: no incoming dialogue addressed to 小红.

🎯 Checking Success Criteria:
   Location: 医院 (need: 医院)
   At Hospital: ✓
   Spoke with 小红: ✗


==================================================
Turn 5
==================================================
[NPC001] Current location: 医院
[NPC001] Available actions: ['说话', '移动', '保持沉默', '查看地图']

🤖 Running agent workflow: NPC001 (小张) ...

📝 Conversation Log:
--------------------------------------------------
[1] HumanMessage:
    系统：你当前在家
[2] AIMessage:
    行动类型='查看地图' 内心='我现在在家，需要去医院取药，先看看地图上医院的位置和路线怎么走。'
[3] HumanMessage:
    系统反馈：地图信息：共有4个地点 - 家(坐标[0, 0]), 医院(坐标[1, 1]), 小明家(坐标[0, 1]), 超市(坐标[1, 0])
[4] HumanMessage:
    系统：你当前在家
[5] AIMessage:
    行动类型='移动' 方向='上' 内心='昨天小明说他不舒服，正好顺路去小明家看看他怎么样了，然后再去医院取药，手有点疼，得抓紧时间。'
[6] HumanMessage:
    系统反馈：你成功移动到了小明家
[7] HumanMessage:
    系统：你当前在小明家
[8] AIMessage:
    行动类型='保持沉默' 内心='现在到了小明家，正好问问他昨天说不舒服怎么样了，手有点疼但先关心朋友，然后再去医院取药。'
[9] HumanMessage:
    系统反馈：你选择了保持沉默
[10] HumanMessage:
    系统：你当前在小明家
[11] AIMessage:
    行动类型='移动' 方向='右' 内心='在小明家保持沉默，可能小明休息了，没打扰他。昨天他说不舒服，下次再问问。现在手疼得厉害，得赶紧去医院取药，从这里右边就是医院了。'
[12] HumanMessage:
    系统反馈：你成功移动到了医院
[13] HumanMessage:
    系统：你当前在医院，附近有小红
[14] AIMessage:
    行动类型='说话' 目标='小红' 内容='你好，我是来取药的，前几天打球扭到手，医生开的药，今天来取。' 内心='终于到医院了，手疼了好几天，得赶紧取药，顺便问问小红知不知道小明的情况，虽然不熟，但附近有她先问问怎么取药。'
    Structured: {'行动类型': '说话', '目标': '小红', '内容': '你好，我是来取药的，前几天打球扭到手，医生开的药，今天来取。', '内心': '终于到医院了，手疼了好几天，得赶紧取药，顺便问问小红知不知道小明的情况，虽然不熟，但附近有她先问问怎么取药。'}
[15] HumanMessage:
    系统反馈：你对小红说：你好，我是来取药的，前几天打球扭到手，医生开的药，今天来取。
--------------------------------------------------

✅ Last Engine Event:
   Actor: 小张
   Action: 说话
   Args: {'目标': '小红', '内容': '你好，我是来取药的，前几天打球扭到手，医生开的药，今天来取。', '内心': '终于到医院了，手疼了好几天，得赶紧取药，顺便问问小红知不知道小明的情况，虽然不熟，但附近有她先问问怎么取药。'}

[NPC002] Wake condition met: received a dialogue event. Acting once...
🤖 Running agent workflow: NPC002 (小红) ...

📝 Conversation Log:
--------------------------------------------------
[1] HumanMessage:
    系统：你当前在医院，附近有小张

系统：你刚刚收到消息
小张: 你好，我是来取药的，前几天打球扭到手，医生开的药，今天来取。
[2] AIMessage:
    行动类型='说话' 目标='小张' 内容='您好！取药请去东南角的药房，您带好处方单吗？需要我帮您指引一下路线吗？' 内心='患者来取药，我要热情服务，药房在东南角，先确认处方。'
    Structured: {'行动类型': '说话', '目标': '小张', '内容': '您好！取药请去东南角的药房，您带好处方单吗？需要我帮您指引一下路线吗？', '内心': '患者来取药，我要热情服务，药房在东南角，先确认处方。'}
[3] HumanMessage:
    系统反馈：你对小张说：您好！取药请去东南角的药房，您带好处方单吗？需要我帮您指引一下路线吗？
--------------------------------------------------

✅ Last Engine Event:
   Actor: 小红
   Action: 说话
   Args: {'目标': '小张', '内容': '您好！取药请去东南角的药房，您带好处方单吗？需要我帮您指引一下路线吗？', '内心': '患者来取药，我要热情服务，药房在东南角，先确认处方。'}


🎯 Checking Success Criteria:
   Location: 医院 (need: 医院)
   At Hospital: ✓
   Spoke with 小红: ✓

🎉 SUCCESS! Test completed successfully!
   小张 reached 医院 and spoke with 小红 in 5 turns
==================================================
Test Summary
==================================================
Status: SUCCESS ✓
Total turns: 5
Final location: 医院
Total actions taken: 6

Full Event Log:
--------------------------------------------------
1. {'actor': '小张', 'action': '查看地图', 'args': {'内心': '我现在在家，需要去医院取药，先看看地图上医院的位置和路线怎么走。'}, 'map_info': {'locations': {'家': [0, 0], '医院': [1, 1], '小明家': [0, 1], '超市': [1, 0]}, 'total_locations': 4}}
2. {'actor': '小张', 'action': '移动', 'args': {'方向': '上', '内心': '昨天小明说他不舒服，正好顺路去小明家看看他怎么样了，然后再去医院取药，手有点疼，得抓紧时间。'}, 'new_location': '小明家'}
3. {'actor': '小张', 'action': '保持沉默', 'args': {'内心': '现在到了小明家，正好问问他昨天说不舒服怎么样了，手有点疼但先关心朋友，然后再去医院取药。'}}
4. {'actor': '小张', 'action': '移动', 'args': {'方向': '右', '内心': '在小明家保持沉默，可能小明休息了，没打扰他。昨天他说不舒服，下次再问问。现在手疼得厉害，得赶紧去医院取药，从这里右边就是医院了。'}, 'new_location': '医院'}
5. {'actor': '小张', 'action': '说话', 'args': {'目标': '小红', '内容': '你好，我是来取药的，前几天打球扭到手，医生开的药，今天来取。', '内心': '终于到医院了，手疼了好几天，得赶紧取药，顺便问问小红知不知道小明的情况，虽然不熟，但附近有她先问问怎么取药。'}}
6. {'actor': '小红', 'action': '说话', 'args': {'目标': '小张', '内容': '您好！取药请去东南角的药房，您带好处方单吗？需要我帮您指引一下路线吗？', '内心': '患者来取药，我要热情服务，药房在东南角，先确认处方。'}}
```